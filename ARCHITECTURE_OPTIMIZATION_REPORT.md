# RapidOCR Service - å„ªåŒ–å¾Œçš„å°ˆæ¡ˆæ¶æ§‹å ±å‘Š

## ğŸ‰ å°ˆæ¡ˆæ¶æ§‹å„ªåŒ–å®Œæˆï¼

åŸºæ–¼ FastAPI å®˜æ–¹æ–‡æª”å’Œ UV æœ€ä½³å¯¦è¸ï¼Œæˆ‘å€‘å·²ç¶“æˆåŠŸå„ªåŒ–äº† RapidOCR Service çš„å°ˆæ¡ˆæ¶æ§‹ã€‚

## ğŸ“ æ–°çš„å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ app/                    # ä¸»è¦æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼ï¼ˆFastAPI æ¨™æº–çµæ§‹ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py            # ç°¡åŒ–çš„ä¸»æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚   â”œâ”€â”€ dependencies.py    # ä¾è³´æ³¨å…¥æ¨¡çµ„
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ models.py          # Pydantic æ¨¡å‹
â”‚   â”œâ”€â”€ routers/           # API è·¯ç”±æ¨¡çµ„ (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ health.py      # å¥åº·æª¢æŸ¥å’Œç›£æ§ç«¯é»
â”‚   â”‚   â””â”€â”€ ocr.py         # OCR è™•ç†ç«¯é»
â”‚   â”œâ”€â”€ ocr_service.py     # OCR æœå‹™é‚è¼¯
â”‚   â”œâ”€â”€ file_manager.py    # æ–‡ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ gpu_utils.py       # GPU å·¥å…·
â”‚   â””â”€â”€ logging_config.py  # æ—¥èªŒé…ç½®
â”œâ”€â”€ tests/                 # æ¸¬è©¦æ–‡ä»¶
â”œâ”€â”€ temp/                  # è‡¨æ™‚æ–‡ä»¶ç›®éŒ„
â”œâ”€â”€ logs/                  # æ—¥èªŒæ–‡ä»¶ç›®éŒ„
â”œâ”€â”€ pyproject.toml         # å°ˆæ¡ˆé…ç½®å’Œä¾è³´ï¼ˆå·²å„ªåŒ–ï¼‰
â”œâ”€â”€ uv.lock               # UV é–å®šæ–‡ä»¶
â”œâ”€â”€ .python-version       # Python ç‰ˆæœ¬å®šç¾©
â”œâ”€â”€ .env.example          # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ .pre-commit-config.yaml # Pre-commit hooks
â”œâ”€â”€ Dockerfile            # Docker é…ç½®ï¼ˆå·²å„ªåŒ–ï¼‰
â”œâ”€â”€ docker-compose.yml    # Docker Compose é…ç½®
â”œâ”€â”€ Makefile              # ä¾¿æ·å‘½ä»¤ï¼ˆå·²æ›´æ–°ï¼‰
â””â”€â”€ README.md             # å°ˆæ¡ˆèªªæ˜
```

## âœ… ä¸»è¦æ”¹é€²

### 1. æ¨¡çµ„åŒ–æ¶æ§‹
- **åˆ†é›¢é—œæ³¨é»**ï¼šå°‡åŸæœ¬å–®ä¸€çš„ `main.py` æ‹†åˆ†ç‚ºæ¨¡çµ„åŒ–çµæ§‹
- **Router æ¨¡å¼**ï¼šæ¡ç”¨ FastAPI æ¨è–¦çš„ router æ¨¡å¼çµ„ç¹” API ç«¯é»
- **ä¾è³´æ³¨å…¥**ï¼šæ·»åŠ  `dependencies.py` æ”¯æŒä¾è³´æ³¨å…¥æ¨¡å¼

### 2. FastAPI æœ€ä½³å¯¦è¸
- **ä½¿ç”¨ `fastapi[standard]`**ï¼šæ¡ç”¨æ¨™æº–ç‰ˆæœ¬åŒ…å«æ‰€æœ‰å¿…éœ€çµ„ä»¶
- **ç¾ä»£ CLI**ï¼šä½¿ç”¨æ–°çš„ `fastapi dev` å’Œ `fastapi run` å‘½ä»¤
- **æ¨™æº–çµæ§‹**ï¼šç¬¦åˆ FastAPI å®˜æ–¹æ¨è–¦çš„å°ˆæ¡ˆä½ˆå±€

### 3. å„ªåŒ–çš„ Docker é…ç½®
```dockerfile
# ä½¿ç”¨å®˜æ–¹æ¨è–¦çš„ uv Docker æ¨¡å¼
COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

# ç°¡åŒ–çš„æ§‹å»ºæµç¨‹
WORKDIR /app
RUN uv sync --frozen --no-cache

# ä½¿ç”¨ FastAPI CLI é‹è¡Œ
CMD ["/app/.venv/bin/fastapi", "run", "app/main.py", "--port", "80", "--host", "0.0.0.0"]
```

### 4. æ”¹é€²çš„ä¾è³´ç®¡ç†
- **ç°¡åŒ–ä¾è³´**ï¼šä½¿ç”¨ `fastapi[standard]` æ›¿ä»£å¤šå€‹ç¨ç«‹åŒ…
- **æ¨™æº–æ ¼å¼**ï¼šæ¡ç”¨æ–°çš„ `dependency-groups` æ ¼å¼
- **æ›´å¿«çš„è§£æ**ï¼šåˆ©ç”¨ UV çš„è¶…å¿«ä¾è³´è§£æ

## ğŸš€ æ–°çš„ä½¿ç”¨æ–¹å¼

### é–‹ç™¼æ¨¡å¼
```bash
# ä½¿ç”¨æ–°çš„ FastAPI CLI
uv run fastapi dev app/main.py

# æˆ–ä½¿ç”¨ Makefile
make run
```

### ç”Ÿç”¢æ¨¡å¼
```bash
# ä½¿ç”¨ FastAPI CLI ç”Ÿç”¢æ¨¡å¼
uv run fastapi run app/main.py --port 80

# æˆ–ä½¿ç”¨ Makefile
make run-prod
```

### Docker éƒ¨ç½²
```bash
# æ§‹å»ºæ˜ åƒ
docker build -t rapidocr-service .

# é‹è¡Œå®¹å™¨
docker run -p 8000:80 rapidocr-service

# æˆ–ä½¿ç”¨ docker-compose
docker-compose up -d
```

## ğŸ”§ API ç«¯é»è®Šæ›´

### æ–°çš„ç«¯é»çµæ§‹
- **æ ¹ç«¯é»**ï¼š`/` - åŸºæœ¬æœå‹™è³‡è¨Š
- **å¥åº·æª¢æŸ¥**ï¼š`/health/` - å¥åº·ç‹€æ…‹
- **è©³ç´°çµ±è¨ˆ**ï¼š`/health/stats` - æœå‹™çµ±è¨ˆè³‡è¨Š
- **OCR è™•ç†**ï¼š`/ocr/` - OCR è™•ç†ç«¯é»

### å‘å¾Œå…¼å®¹æ€§
- æ‰€æœ‰åŸæœ‰åŠŸèƒ½ä¿æŒä¸è®Š
- API éŸ¿æ‡‰æ ¼å¼å®Œå…¨ç›¸åŒ
- åªæ˜¯ `/stats` ç§»åˆ°äº† `/health/stats`

## ğŸ§ª å“è³ªä¿è­‰

### æ¸¬è©¦çµæœ
- âœ… **æ‰€æœ‰æ¸¬è©¦é€šé**ï¼š12/12 tests passed
- âœ… **é¡å‹æª¢æŸ¥**ï¼šMyPy ç„¡éŒ¯èª¤
- âœ… **ä»£ç¢¼é¢¨æ ¼**ï¼šRuff + Black æª¢æŸ¥é€šé
- âœ… **åŠŸèƒ½é©—è­‰**ï¼šFastAPI CLI æ­£å¸¸å·¥ä½œ

### æ€§èƒ½è¡¨ç¾
- **æ›´å¿«çš„å•Ÿå‹•**ï¼šæ¨¡çµ„åŒ–æ¶æ§‹æ¸›å°‘å•Ÿå‹•æ™‚é–“
- **æ›´å¥½çš„å¯ç¶­è­·æ€§**ï¼šæ¸…æ™°çš„æ¨¡çµ„åˆ†é›¢
- **æ¨™æº–åŒ–éƒ¨ç½²**ï¼šéµå¾ª FastAPI éƒ¨ç½²æœ€ä½³å¯¦è¸

## ğŸ¯ é—œéµå„ªå‹¢

1. **æ¨™æº–åŒ–æ¶æ§‹**ï¼šå®Œå…¨ç¬¦åˆ FastAPI å®˜æ–¹æœ€ä½³å¯¦è¸
2. **ç¾ä»£å·¥å…·éˆ**ï¼šä½¿ç”¨æœ€æ–°çš„ FastAPI CLI å’Œ UV å·¥å…·
3. **æ›´å¥½çš„å¯ç¶­è­·æ€§**ï¼šæ¨¡çµ„åŒ–è¨­è¨ˆä¾¿æ–¼æ“´å±•å’Œç¶­è­·
4. **å®Œæ•´çš„é¡å‹å®‰å…¨**ï¼šå…¨é¢çš„ TypeScript å¼é¡å‹æ¨™æ³¨
5. **è‡ªå‹•åŒ–å“è³ªä¿è­‰**ï¼špre-commit hooks ç¢ºä¿ä»£ç¢¼å“è³ª
6. **å®¹å™¨åŒ–å°±ç·’**ï¼šå„ªåŒ–çš„ Docker é…ç½®æ”¯æŒç”Ÿç”¢éƒ¨ç½²

## ğŸ“š ç›¸é—œæ–‡æª”

- [FastAPI å®˜æ–¹æŒ‡å—](https://fastapi.tiangolo.com/)
- [UV å·¥å…·æ–‡æª”](https://docs.astral.sh/uv/)
- [å°ˆæ¡ˆçµæ§‹èªªæ˜](./PROJECT_STRUCTURE.md)
- [Docker éƒ¨ç½²æŒ‡å—](./README.md#docker-deployment)

---

**å°ˆæ¡ˆå·²æˆåŠŸç¾ä»£åŒ–ï¼Œæ¶æ§‹æ¸…æ™°ï¼Œéµå¾ªæœ€ä½³å¯¦è¸ï¼** ğŸš€
